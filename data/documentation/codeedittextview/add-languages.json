{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"First of all have a look at the corresponding "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/CodeEditApp\/CodeEditTextView\/issues\/15"},{"type":"text","text":" to see which languages still need implementation."}]},{"anchor":"Add-SPM-support","level":2,"type":"heading","text":"Add SPM support"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you find one you want to add, fork and clone the linked repo and create a new branch "},{"type":"codeVoice","code":"feature\/spm"},{"type":"text","text":"."}]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In the following code samples replace "},{"type":"codeVoice","code":"{LANG}"},{"type":"text","text":" or "},{"type":"codeVoice","code":"{lang}"},{"type":"text","text":" with the language you add (e.g.: "},{"type":"codeVoice","code":"Swift"},{"type":"text","text":" or "},{"type":"codeVoice","code":"CPP"},{"type":"text","text":" and "},{"type":"codeVoice","code":"swift"},{"type":"text","text":" or "},{"type":"codeVoice","code":"cpp"},{"type":"text","text":" respectively)"}]}]},{"anchor":".gitignore","level":3,"type":"heading","text":".gitignore"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Edit the "},{"type":"codeVoice","code":".gitignore"},{"type":"text","text":" file to exclude the "},{"type":"codeVoice","code":".build\/"},{"type":"text","text":" directory from git."}]},{"anchor":"Package.swift","level":3,"type":"heading","text":"Package.swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a new file "},{"type":"codeVoice","code":"Package.swift"},{"type":"text","text":" in the "},{"type":"codeVoice","code":"root"},{"type":"text","text":" directory of the repository and add the following configuration."}]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Make sure to remove the comment in ‘sources’."}]}]},{"type":"codeListing","syntax":"swift","code":["\/\/ swift-tools-version:5.3","import PackageDescription","","let package = Package(","    name: \"TreeSitter{LANG}\",","    platforms: [.macOS(.v10_13), .iOS(.v11)],","    products: [","        .library(name: \"TreeSitter{LANG}\", targets: [\"TreeSitter{LANG}\"]),","    ],","    dependencies: [],","    targets: [","        .target(name: \"TreeSitter{LANG}\",","                path: \".\",","                exclude: [","                    \"binding.gyp\",","                    \"bindings\",","                    \"Cargo.toml\",","                    \"corpus\",","                    \"examples\",","                    \"grammar.js\",","                    \"LICENSE\",","                    \"Makefile\",","                    \"package.json\",","                    \"README.md\",","                    \"src\/grammar.json\",","                    \"src\/node-types.json\",","                    \/\/ any additional files to exclude ","                ],","                sources: [","                    \"src\/parser.c\",","                    \"src\/scanner.cc\", \/\/ this might be `scanner.c` or not present at all","                ],","                resources: [","                    .copy(\"queries\")","                ],","                publicHeadersPath: \"bindings\/swift\",","                cSettings: [.headerSearchPath(\"src\")])","    ]",")"]},{"anchor":"Swift-Bindings","level":3,"type":"heading","text":"Swift Bindings"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Now you need to create the Swift bindings which are a "},{"type":"codeVoice","code":"header"},{"type":"text","text":" file exposing the "},{"type":"codeVoice","code":"tree_sitter_{lang}()"},{"type":"text","text":" function."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"First of all create the following directories inside the "},{"type":"codeVoice","code":"bindings\/"},{"type":"text","text":" directory:"}]},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":".\/bindings\/swift\/TreeSitter{LANG}\/"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Inside that folder create a new header file called "},{"type":"codeVoice","code":"{lang}.h"},{"type":"text","text":"."}]},{"type":"codeListing","syntax":"cpp","code":["#ifndef TREE_SITTER_{LANG}_H_","#define TREE_SITTER_{LANG}_H_","","typedef struct TSLanguage TSLanguage;","","#ifdef __cplusplus","extern \"C\" {","#endif","","extern TSLanguage *tree_sitter_{lang}();","","#ifdef __cplusplus","}","#endif","","#endif \/\/ TREE_SITTER_{LANG}_H_"]},{"anchor":"Add-it-to-CodeLanguage","level":2,"type":"heading","text":"Add it to CodeLanguage"},{"type":"paragraph","inlineContent":[{"type":"text","text":"After you added the files you can add the package to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView"},{"type":"text","text":" locally by adding it to the "},{"type":"codeVoice","code":"Package.swift"},{"type":"text","text":" file’s dependecies inside "},{"type":"reference","isActive":true,"identifier":"doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView"},{"type":"text","text":"."}]},{"type":"codeListing","syntax":"swift","code":["dependencies: [","    \/\/ other package dependencies","    .package(name: \"TreeSitter{LANG}\", path: \"\/PATH\/TO\/LOCAL\/PACKAGE\"),","],","targets: [","    .target(","        name: \"CodeEditTextView\",","        dependencies: [","            \/\/ other dependencies","            .product(name: \"TreeSitter{LANG}\", package: \"tree-sitter-{lang}\"),","        ]),","]"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Now move over to the "},{"type":"codeVoice","code":"CodeLanguage"},{"type":"text","text":" folder where 3 files need to be updated."}]},{"anchor":"TreeSitterLanguage.swift","level":3,"type":"heading","text":"TreeSitterLanguage.swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Add a case for your language to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView\/TreeSitterLanguage"},{"type":"text","text":":"}]},{"type":"codeListing","syntax":"swift","code":["public enum TreeSitterLanguage: String {","    \/\/ other cases","    case {lang}","}"]},{"anchor":"CodeLanguage.swift","level":3,"type":"heading","text":"CodeLanguage.swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"On top add an "},{"type":"codeVoice","code":"import"},{"type":"text","text":" statement:"}]},{"type":"codeListing","syntax":"swift","code":["import TreeSitter{LANG}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Find the "},{"type":"codeVoice","code":"tsLanguage"},{"type":"text","text":" computed property and add a "},{"type":"codeVoice","code":"case"},{"type":"text","text":" to it:"}]},{"type":"codeListing","syntax":"swift","code":["private var tsLanguage: UnsafeMutablePointer<TSLanguage>? {","    switch id {","    \/\/ other cases","    case .{lang}:","        return tree_sitter_{lang}()","    }","    \/\/ other cases","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"On the bottom of the file add a new "},{"type":"codeVoice","code":"static"},{"type":"text","text":" constant:"}]},{"type":"codeListing","syntax":"swift","code":["static let {lang}: CodeLanguage = .init(id: .{lang}, tsName: {LANG}, extensions: [...])"]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"in ‘extensions’ add the proper file extensions your language uses."}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Now find the static constant "},{"type":"reference","isActive":true,"identifier":"doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView\/CodeLanguage\/allLanguages"},{"type":"text","text":" and add your language to it:"}]},{"type":"codeListing","syntax":"swift","code":["static let allLanguages: [CodeLanguage] = [","    \/\/ other languages","    .{lang},","    \/\/ other languages","]"]},{"anchor":"TreeSitterModel.swift","level":3,"type":"heading","text":"TreeSitterModel.swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a new query like so:"}]},{"type":"codeListing","syntax":"swift","code":["public private(set) lazy var {lang}Query: Query? = {","    return queryFor(.{lang})","}()"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Find the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView\/TreeSitterModel\/query(for:)"},{"type":"text","text":" method and add a "},{"type":"codeVoice","code":"case"},{"type":"text","text":" for your language:"}]},{"type":"codeListing","syntax":"swift","code":["public func query(for language: TreeSitterLanguage) -> Query? {","    switch language {","    \/\/ other cases","    case .{lang}:","        return {lang}Query","    \/\/ other cases","    }","}"]},{"anchor":"Test-it!","level":2,"type":"heading","text":"Test it!"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In order to test whether is working or not, add "},{"type":"reference","isActive":true,"identifier":"doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView"},{"type":"text","text":" as a local dependency to "},{"type":"codeVoice","code":"CodeEdit"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In order to do that close "},{"type":"reference","isActive":true,"identifier":"doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView"},{"type":"text","text":" in Xcode and open "},{"type":"codeVoice","code":"CodeEdit"},{"type":"text","text":". Then inside "},{"type":"codeVoice","code":"CodeEditModules"},{"type":"text","text":" replace the "},{"type":"codeVoice","code":"CodeEditTextView"},{"type":"text","text":" dependency with:"}]},{"type":"codeListing","syntax":"swift","code":[".package(name: \"CodeEditTextView\", path: \"\/PATH\/TO\/CodeEditTextView\")"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"After that, you may need to reset packages caches but then it should compile and run."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When everything is working correctly push your "},{"type":"codeVoice","code":"tree-sitter-{lang}"},{"type":"text","text":" changes to "},{"type":"codeVoice","code":"origin"},{"type":"text","text":" and also create a Pull Request to the official repository."}]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Take "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/tree-sitter\/tree-sitter-javascript\/pull\/223"},{"type":"text","text":" as a template and cross-reference it with your Pull Request."}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Now you can remove the local dependencies and replace it with the actual package URLs and submit a Pull Request for "},{"type":"reference","isActive":true,"identifier":"doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView"},{"type":"text","text":"."}]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/codeedittextview\/add-languages"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView\/Add-Languages","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"This article is a writedown on how to add support for more languages to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView\/CodeLanguage"},{"type":"text","text":"."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Add Languages","role":"article","modules":[{"name":"CodeEditTextView"}]},"hierarchy":{"paths":[["doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView"],["doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView","doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView\/CodeLanguage"]]},"references":{"doc://CodeEditTextView/documentation/CodeEditTextView/CodeLanguage/allLanguages":{"role":"symbol","title":"allLanguages","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"allLanguages"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"CodeLanguage","preciseIdentifier":"s:16CodeEditTextView0A8LanguageV"},{"kind":"text","text":"]"}],"abstract":[{"type":"text","text":"An array of all language structures."}],"identifier":"doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView\/CodeLanguage\/allLanguages","kind":"symbol","type":"topic","url":"\/documentation\/codeedittextview\/codelanguage\/alllanguages"},"doc://CodeEditTextView/documentation/CodeEditTextView/CodeLanguage":{"role":"symbol","title":"CodeLanguage","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"CodeLanguage"}],"abstract":[{"type":"text","text":"A structure holding metadata for code languages"}],"identifier":"doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView\/CodeLanguage","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"CodeLanguage"}],"url":"\/documentation\/codeedittextview\/codelanguage"},"https://github.com/CodeEditApp/CodeEditTextView/issues/15":{"title":"GitHub Issue","titleInlineContent":[{"type":"text","text":"GitHub Issue"}],"type":"link","identifier":"https:\/\/github.com\/CodeEditApp\/CodeEditTextView\/issues\/15","url":"https:\/\/github.com\/CodeEditApp\/CodeEditTextView\/issues\/15"},"https://github.com/tree-sitter/tree-sitter-javascript/pull/223":{"title":"this PR description","titleInlineContent":[{"type":"text","text":"this PR description"}],"type":"link","identifier":"https:\/\/github.com\/tree-sitter\/tree-sitter-javascript\/pull\/223","url":"https:\/\/github.com\/tree-sitter\/tree-sitter-javascript\/pull\/223"},"doc://CodeEditTextView/documentation/CodeEditTextView":{"role":"collection","title":"CodeEditTextView","abstract":[{"type":"text","text":"A code editor with syntax highlighting powered by tree-sitter."}],"identifier":"doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView","kind":"symbol","type":"topic","url":"\/documentation\/codeedittextview"},"doc://CodeEditTextView/documentation/CodeEditTextView/TreeSitterLanguage":{"role":"symbol","title":"TreeSitterLanguage","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"TreeSitterLanguage"}],"abstract":[{"type":"text","text":"A collection of languages that are supported by "},{"type":"codeVoice","code":"tree-sitter"}],"identifier":"doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView\/TreeSitterLanguage","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TreeSitterLanguage"}],"url":"\/documentation\/codeedittextview\/treesitterlanguage"},"doc://CodeEditTextView/documentation/CodeEditTextView/TreeSitterModel/query(for:)":{"role":"symbol","title":"query(for:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"query"},{"kind":"text","text":"("},{"kind":"externalParam","text":"for"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"TreeSitterLanguage","preciseIdentifier":"s:16CodeEditTextView18TreeSitterLanguageO"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Query","preciseIdentifier":"s:15SwiftTreeSitter5QueryC"},{"kind":"text","text":"?"}],"abstract":[],"identifier":"doc:\/\/CodeEditTextView\/documentation\/CodeEditTextView\/TreeSitterModel\/query(for:)","kind":"symbol","type":"topic","url":"\/documentation\/codeedittextview\/treesittermodel\/query(for:)"}}}